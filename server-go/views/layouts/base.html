<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="{{.MetaDescription}}">
    <title>{{if .Title}}{{.Title}} | {{end}}ArfCoder</title>

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/static/images/app_icon.png">

    <!-- Google Fonts - Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">

    <!-- Main CSS -->
    <link rel="stylesheet" href="/static/css/styles.css">

    <!-- AOS Animation Library -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

    <!-- Alpine.js -->
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>

    <!-- HTMX -->
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>

    <!-- CryptoJS for Security -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.2.0/crypto-js.min.js"></script>
</head>

<body class="font-sans antialiased bg-background text-foreground selection:bg-black selection:text-white" x-data
    x-init="$store.auth.init(); $store.cart.init()">

    {{template "content" .}}

    <!-- AOS Init -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init({
            duration: 600,
            once: true,
            offset: 50
        });
    </script>

    <!-- App Scripts -->
    <script src="/static/js/security.js"></script>
    <script src="/static/js/stores.js"></script>
    <script src="/static/js/htmx-config.js"></script>

    <!-- Legacy Service Worker Cleanup (Migration from Next.js) -->
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.getRegistrations().then(function (registrations) {
                for (let registration of registrations) {
                    console.log('Unregistering legacy service worker:', registration);
                    registration.unregister();
                }
            });
        }
    </script>
</body>

</html>