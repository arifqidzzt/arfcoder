<nav class="flex items-center justify-between px-4 md:px-8 py-4 border-b border-gray-100 bg-white/80 backdrop-blur-md sticky top-0 z-50 transition-all">
  <a href="/" class="flex items-center gap-3 group">
    <div class="w-10 h-10 flex items-center justify-center overflow-hidden rounded-lg">
      <img src="/static/img/app_icon.png" alt="Logo" class="w-full h-full object-cover" />
    </div>
    <span class="text-xl font-bold tracking-tighter">ARFCODER</span>
  </a>

  <div class="hidden md:flex space-x-8 text-sm font-medium">
    <a href="/" class="hover:text-gray-600 transition-colors">Beranda</a>
    <a href="/products" class="hover:text-gray-600 transition-colors">Produk</a>
    <a href="/services" class="hover:text-gray-600 transition-colors">Jasa</a>
    {{if .User}}
      <a href="/orders" class="hover:text-gray-600 transition-colors">Pesanan</a>
      {{if or (eq .User.Role "ADMIN") (eq .User.Role "SUPER_ADMIN")}}
        <a href="/admin" class="text-purple-600 font-bold hover:text-purple-800 transition-colors hx-boost-off">Dashboard</a>
      {{end}}
    {{end}}
  </div>

  <div class="flex items-center space-x-2 md:space-x-4">
    {{if .User}}
      <div class="flex items-center space-x-2 md:space-x-4">
        <a href="/profile" class="flex items-center gap-2 hover:bg-gray-50 px-2 md:px-3 py-2 rounded-full transition-colors group">
          <div class="w-8 h-8 rounded-full flex items-center justify-center font-bold text-xs overflow-hidden border border-gray-200 bg-gray-100">
            {{if .User.Avatar}}
              <img src="{{.User.Avatar}}" alt="{{.User.Name}}" class="w-full h-full object-cover" />
            {{else}}
              <span class="text-black">{{slice .User.Name 0 1}}</span>
            {{end}}
          </div>
          <span class="text-sm font-medium hidden sm:inline group-hover:text-black">{{.User.Name}}</span>
        </a>
        <form hx-post="/api/auth/logout" hx-target="body" hx-push-url="true" class="m-0 p-0">
            <button type="submit" class="p-2 hover:bg-red-50 text-gray-400 hover:text-red-500 rounded-full transition-colors" title="Keluar">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-log-out"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" x2="9" y1="12" y2="12"/></svg>
            </button>
        </form>
      </div>
    {{else}}
      <a href="/login" class="p-2 hover:bg-gray-100 rounded-full transition-colors">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
      </a>
    {{end}}

    <a href="/cart" class="p-2 bg-black text-white rounded-full relative hover:bg-gray-800 transition-colors">
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-shopping-bag"><path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"/><path d="M3 6h18"/><path d="M16 10a4 4 0 0 1-8 0"/></svg>
      {{if .CartCount}}
        {{if gt .CartCount 0}}
            <span id="cart-badge" class="absolute -top-1 -right-1 bg-accent text-[10px] w-4 h-4 flex items-center justify-center rounded-full">
                {{.CartCount}}
            </span>
        {{end}}
      {{end}}
    </a>
  </div>
</nav>
