<div class="min-h-[80vh] flex items-center justify-center p-4" x-data="{ method: 'authenticator' }">
    <div class="w-full max-w-md bg-white p-8 rounded-[3rem] border border-gray-100 shadow-elevated">
        <div class="text-center mb-10">
            <h1 class="text-3xl font-black tracking-tight mb-2 uppercase">Security Check</h1>
            <p class="text-gray-400 text-sm font-medium">Verifikasi identitas Admin Anda.</p>
        </div>

        <div class="flex gap-2 mb-10 bg-gray-50 p-2 rounded-2xl">
            <button @click="method = 'authenticator'" :class="method === 'authenticator' ? 'bg-white shadow-sm text-black' : 'text-gray-400'" class="flex-1 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all">Authenticator</button>
            <button @click="method = 'email'" :class="method === 'email' ? 'bg-white shadow-sm text-black' : 'text-gray-400'" class="flex-1 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all">Email</button>
            <button @click="method = 'whatsapp'" :class="method === 'whatsapp' ? 'bg-white shadow-sm text-black' : 'text-gray-400'" class="flex-1 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all">WA</button>
        </div>

        <form hx-post="/api/auth/2fa/verify" hx-on::after-request="if(event.detail.successful) { toast('Login Berhasil!'); setTimeout(() => window.location.href='/admin', 1500); }" class="space-y-8">
            <input type="hidden" name="userId" value="{{.UserID}}">
            <input type="hidden" name="method" :value="method">
            
            <div class="flex justify-center">
                <input type="text" name="code" required class="w-full max-w-[200px] p-5 bg-gray-50 border border-gray-100 rounded-[2rem] text-center font-black text-3xl tracking-[0.5em] focus:ring-2 focus:ring-black/5 outline-none" maxlength="6" placeholder="000000">
            </div>

            <button type="submit" class="w-full py-5 bg-black text-white rounded-[1.5rem] font-black uppercase text-xs tracking-widest shadow-xl shadow-black/10 hover:bg-gray-800 transition-all active:scale-[0.98]">
                Masuk Dashboard
            </button>
        </form>

        <div x-show="method !== 'authenticator'" class="mt-8 text-center animate-in fade-in duration-300">
            <button hx-post="/api/auth/2fa/send" hx-vals='js:{userId: "{{.UserID}}", method: method}' hx-on::after-request="toast('Kode cadangan telah dikirim!')" class="text-xs font-black uppercase tracking-tighter text-accent hover:underline">
                Kirim Kode ke <span x-text="method"></span>
            </button>
        </div>
    </div>
</div>
