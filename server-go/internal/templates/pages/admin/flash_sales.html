<div class="p-4 md:p-10 max-w-6xl mx-auto">
    <div class="mb-10">
        <h1 class="text-3xl font-black uppercase tracking-tighter">Manajemen Flash Sale</h1>
        <p class="text-gray-400 font-medium">Buat penawaran terbatas untuk produk pilihan Anda.</p>
    </div>

    <!-- Create Flash Sale Form -->
    <div class="bg-white p-8 rounded-[2.5rem] border border-gray-100 shadow-soft mb-10">
        <h3 class="font-black text-[10px] uppercase tracking-[0.2em] text-gray-400 mb-8">Buat Flash Sale Baru</h3>
        <form hx-post="/api/flash-sales" hx-target="body" hx-push-url="true" class="grid grid-cols-1 md:grid-cols-4 gap-6 items-end">
            <div class="md:col-span-1 space-y-2">
                <label class="text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1">Pilih Produk</label>
                <select name="productId" required class="w-full p-4 bg-gray-50 border border-gray-100 rounded-2xl outline-none font-bold text-xs">
                    {{range .AllProducts}}
                        <option value="{{.ID}}">{{.Name}}</option>
                    {{end}}
                </select>
            </div>
            <div class="space-y-2">
                <label class="text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1">Harga Diskon (Rp)</label>
                <input type="number" name="discountPrice" required class="w-full p-4 bg-gray-50 border border-gray-100 rounded-2xl outline-none font-bold text-xs">
            </div>
            <div class="space-y-2">
                <label class="text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1">Berakhir Pada</label>
                <input type="datetime-local" name="endTime" required class="w-full p-4 bg-gray-50 border border-gray-100 rounded-2xl outline-none font-bold text-xs">
            </div>
            <button type="submit" class="bg-black text-white p-4 rounded-2xl font-black uppercase text-[10px] tracking-widest hover:bg-gray-800 transition-all">
                Aktifkan
            </button>
        </form>
    </div>

    <!-- Active Flash Sales List -->
    <div class="bg-white rounded-[2.5rem] border border-gray-100 shadow-soft overflow-hidden">
        <div class="overflow-x-auto">
            <table class="w-full text-left text-sm min-w-[800px]">
                <thead>
                    <tr class="bg-gray-50/50 border-b border-gray-100">
                        <th class="px-8 py-5 font-black text-[10px] text-gray-400 uppercase tracking-widest">Produk</th>
                        <th class="px-8 py-5 font-black text-[10px] text-gray-400 uppercase tracking-widest text-center">Harga Awal</th>
                        <th class="px-8 py-5 font-black text-[10px] text-gray-400 uppercase tracking-widest text-center">Harga Diskon</th>
                        <th class="px-8 py-5 font-black text-[10px] text-gray-400 uppercase tracking-widest text-center">Sisa Waktu</th>
                        <th class="px-8 py-5 font-black text-[10px] text-gray-400 uppercase tracking-widest text-right">Aksi</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-gray-50">
                    {{range .FlashSales}}
                    <tr class="hover:bg-gray-50/50 transition-colors">
                        <td class="px-8 py-6">
                            <div class="flex items-center gap-4">
                                <img src="{{index .Product.Images 0}}" class="w-10 h-10 rounded-lg object-cover border" />
                                <p class="font-black uppercase tracking-tight text-sm">{{.Product.Name}}</p>
                            </div>
                        </td>
                        <td class="px-8 py-6 text-center text-gray-400 line-through">Rp {{formatNumber .Product.Price}}</td>
                        <td class="px-8 py-6 text-center font-black text-red-600">Rp {{formatNumber .DiscountPrice}}</td>
                        <td class="px-8 py-6 text-center">
                            <span class="px-3 py-1 bg-indigo-50 text-accent text-[9px] font-black uppercase tracking-widest border border-indigo-100 rounded-full">
                                {{.EndTime.Format "02 Jan, 15:04"}}
                            </span>
                        </td>
                        <td class="px-8 py-6 text-right">
                            <button 
                                hx-delete="/api/flash-sales/{{.ID}}"
                                hx-confirm="Matikan flash sale ini?"
                                hx-target="closest tr"
                                hx-swap="outerHTML"
                                class="p-2.5 bg-gray-50 text-red-500 rounded-xl hover:bg-red-50 transition-all"
                            >
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
                            </button>
                        </td>
                    </tr>
                    {{end}}
                </tbody>
            </table>
        </div>
    </div>
</div>
