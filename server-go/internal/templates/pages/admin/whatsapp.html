<div class="p-4 md:p-10 max-w-4xl mx-auto" x-data="{ status: 'DISCONNECTED', qr: '', fetchStatus() {
    fetch('/api/admin/wa/status', { headers: { 'Authorization': 'Bearer ' + '{{.Token}}' } })
        .then(r => r.json())
        .then(d => { this.status = d.status; this.qr = d.qr; });
} }" x-init="fetchStatus(); setInterval(() => fetchStatus(), 3000)">
    
    <div class="text-center mb-12">
        <h1 class="text-3xl font-black uppercase tracking-tighter mb-2">WhatsApp Bot Control</h1>
        <p class="text-gray-400 font-medium">Gunakan bot ini untuk mengirim OTP ke pelanggan.</p>
    </div>

    <div class="bg-white p-12 rounded-[3rem] border border-gray-100 shadow-soft text-center space-y-10">
        <div :class="status === 'CONNECTED' ? 'bg-green-100 text-green-600' : 'bg-gray-50 text-gray-300'" class="w-24 h-24 rounded-[2rem] flex items-center justify-center mx-auto transition-colors duration-500">
            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="14" height="20" x="5" y="2" rx="2" ry="2"/><path d="M12 18h.01"/></svg>
        </div>
        
        <div>
            <p class="text-[10px] font-black text-gray-400 uppercase tracking-[0.3em] mb-2">Status Koneksi</p>
            <h2 class="text-3xl font-black uppercase tracking-tighter" x-text="status">...</h2>
        </div>

        <template x-if="status === 'DISCONNECTED'">
            <button hx-post="/api/admin/wa/start" hx-swap="none" class="px-10 py-4 bg-black text-white rounded-2xl font-black uppercase text-xs tracking-widest shadow-xl shadow-black/10 hover:scale-105 transition-all">
                Mulai Sesi Baru
            </button>
        </template>

        <template x-if="status === 'Scan QR' || qr">
            <div class="space-y-6 animate-in fade-in zoom-in duration-500">
                <div class="bg-white p-6 inline-block rounded-[2rem] border-2 border-gray-50 shadow-inner">
                    <!-- Simple QR Placeholder / Or Use External Script -->
                    <img :src="'https://api.qrserver.com/v1/create-qr-code/?size=250x250&data=' + encodeURIComponent(qr)" class="w-64 h-64" x-show="qr" />
                </div>
                <p class="text-xs font-bold text-gray-400 uppercase tracking-widest">Buka WhatsApp > Tautkan Perangkat</p>
            </div>
        </template>

        <template x-if="status === 'CONNECTED'">
            <button hx-post="/api/admin/wa/logout" hx-confirm="Logout dari sesi ini?" hx-swap="none" class="px-10 py-4 bg-red-50 text-red-600 rounded-2xl font-black uppercase text-xs tracking-widest hover:bg-red-100 transition-all flex items-center gap-2 mx-auto">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" x2="9" y1="12" y2="12"/></svg>
                Logout Sesi
            </button>
        </template>
    </div>
</div>
