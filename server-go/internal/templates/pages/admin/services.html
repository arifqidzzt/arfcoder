<div class="p-4 md:p-10 max-w-6xl mx-auto" x-data="{ editing: null }">
    <div class="mb-10">
        <h1 class="text-3xl font-black uppercase tracking-tighter">Manajemen Layanan</h1>
        <p class="text-gray-400 font-medium">Tampilkan jasa profesional Anda di halaman depan.</p>
    </div>

    <!-- Create/Edit Form -->
    <div class="bg-white p-8 rounded-[2.5rem] border border-gray-100 shadow-soft mb-10">
        <h3 class="font-black text-[10px] uppercase tracking-[0.2em] text-gray-400 mb-8" x-text="editing ? 'Edit Layanan' : 'Tambah Layanan Baru'"></h3>
        <form hx-post="/api/services" hx-target="body" hx-push-url="true" class="space-y-6">
            <template x-if="editing">
                <input type="hidden" name="id" :value="editing.ID">
            </template>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="space-y-2">
                    <label class="text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1">Nama Layanan</label>
                    <input type="text" name="title" :value="editing ? editing.Title : ''" placeholder="Web Development" required class="w-full p-4 bg-gray-50 border border-gray-100 rounded-2xl outline-none font-bold text-sm">
                </div>
                <div class="space-y-2">
                    <label class="text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1">Icon (Lucide)</label>
                    <select name="icon" :value="editing ? editing.Icon : 'Code'" class="w-full p-4 bg-gray-50 border border-gray-100 rounded-2xl outline-none font-bold text-xs">
                        <option value="Code">Code (Dev)</option>
                        <option value="Globe">Globe (Web)</option>
                        <option value="Smartphone">Smartphone (Mobile)</option>
                        <option value="Database">Database (Backend)</option>
                        <option value="Layout">Layout (Design)</option>
                        <option value="Server">Server (DevOps)</option>
                    </select>
                </div>
            </div>

            <div class="space-y-2">
                <label class="text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1">Deskripsi Singkat</label>
                <textarea name="description" rows="3" :value="editing ? editing.Description : ''" placeholder="Jelaskan layanan ini..." required class="w-full p-4 bg-gray-50 border border-gray-100 rounded-2xl outline-none font-medium text-sm"></textarea>
            </div>

            <div class="space-y-2">
                <label class="text-[10px] font-black text-gray-400 uppercase tracking-widest ml-1">Harga Mulai</label>
                <input type="text" name="price" :value="editing ? editing.Price : ''" placeholder="Rp 5.000.000" required class="w-full p-4 bg-gray-50 border border-gray-100 rounded-2xl outline-none font-bold text-sm">
            </div>

            <div class="flex gap-4 pt-4">
                <button type="submit" class="flex-1 py-4 bg-black text-white rounded-2xl font-black uppercase text-[10px] tracking-widest hover:bg-gray-800 transition-all">
                    Simpan
                </button>
                <button type="button" @click="editing = null" x-show="editing" class="px-8 py-4 bg-gray-100 text-black rounded-2xl font-black uppercase text-[10px] tracking-widest hover:bg-gray-200 transition-all">
                    Batal
                </button>
            </div>
        </form>
    </div>

    <!-- Services Grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        {{range .Services}}
        <div class="bg-white p-8 rounded-[2.5rem] border border-gray-100 shadow-soft flex flex-col justify-between group hover:border-black transition-all">
            <div class="mb-6">
                <div class="w-12 h-12 bg-black text-white rounded-2xl flex items-center justify-center mb-6">
                    <!-- Simple Icon Logic based on name matching or generic -->
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 19 7-7 3 3-7 7-3-3z"/><path d="m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/><path d="m2 2 7.586 7.586"/><circle cx="11" cy="11" r="2"/></svg>
                </div>
                <h3 class="text-xl font-black uppercase tracking-tight mb-2">{{.Title}}</h3>
                <p class="text-gray-500 text-sm leading-relaxed mb-4">{{.Description}}</p>
                <p class="font-black text-accent text-lg">{{.Price}}</p>
            </div>
            
            <div class="flex justify-end gap-2 pt-6 border-t border-gray-50 opacity-0 group-hover:opacity-100 transition-opacity">
                <button 
                    @click="editing = {{json .}}" 
                    class="p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors"
                >
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"/><path d="m15 5 4 4"/></svg>
                </button>
                <button 
                    hx-delete="/api/services/{{.ID}}"
                    hx-confirm="Hapus layanan ini?"
                    hx-target="closest div.bg-white"
                    hx-swap="outerHTML"
                    class="p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors"
                >
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/></svg>
                </button>
            </div>
        </div>
        {{end}}
    </div>
</div>
