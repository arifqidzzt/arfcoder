<div class="min-h-screen bg-gray-50/50 pb-20 pt-24">
    <div class="container mx-auto px-4 md:px-8 max-w-5xl">
        
        <div class="flex flex-col md:flex-row justify-between items-start md:items-end gap-6 mb-10">
            <div>
                <div class="flex items-center gap-3 mb-2">
                    <a href="/orders" class="p-2 bg-white rounded-full border border-gray-100 shadow-sm hover:bg-gray-50 transition-all">
                        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
                    </a>
                    <h1 class="text-3xl font-black uppercase tracking-tighter">Detail Pesanan</h1>
                </div>
                <p class="text-gray-400 font-bold ml-11">Invoice #{{.Order.InvoiceNumber}}</p>
            </div>
            
            <div class="px-6 py-3 bg-white rounded-2xl border border-gray-100 shadow-sm">
                <p class="text-[10px] font-black text-gray-400 uppercase tracking-widest mb-1">Status Pesanan</p>
                <span class="font-black text-lg uppercase tracking-tighter {{if eq .Order.Status "PAID"}}text-green-600{{else if eq .Order.Status "PENDING"}}text-orange-600{{else}}text-gray-500{{end}}">
                    {{.Order.Status}}
                </span>
            </div>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-10">
            <!-- Left Side -->
            <div class="lg:col-span-2 space-y-8">
                <!-- Items -->
                <div class="bg-white p-8 rounded-[2.5rem] shadow-soft border border-gray-100">
                    <h3 class="font-black text-sm uppercase tracking-widest mb-8 text-gray-400">Rincian Item</h3>
                    <div class="space-y-6">
                        {{range .Order.Items}}
                        <div class="flex gap-6 items-center">
                            <img src="{{index .Product.Images 0}}" class="w-16 h-16 rounded-2xl object-cover bg-gray-50 border border-gray-100" />
                            <div class="flex-1">
                                <h4 class="font-bold text-sm">{{.Product.Name}}</h4>
                                <p class="text-xs text-gray-400 font-bold uppercase tracking-widest">{{.Quantity}} x Rp {{formatNumber .Price}}</p>
                            </div>
                            <p class="font-black text-sm tracking-tighter">Rp {{formatNumber (calcDiscount .Price 0 .Quantity)}}</p>
                        </div>
                        {{end}}
                    </div>
                    
                    <div class="mt-10 pt-8 border-t border-gray-50 space-y-3">
                        <div class="flex justify-between text-sm font-bold text-gray-400">
                            <span>Subtotal</span>
                            <span class="text-black">Rp {{formatNumber .Order.TotalAmount}}</span>
                        </div>
                        <div class="flex justify-between text-sm font-bold text-gray-400">
                            <span>Diskon</span>
                            <span class="text-red-500">- Rp {{formatNumber .Order.DiscountApplied}}</span>
                        </div>
                        <div class="flex justify-between items-center pt-4">
                            <span class="font-black text-sm uppercase tracking-widest">Total Bayar</span>
                            <span class="text-2xl font-black tracking-tighter">Rp {{formatNumber .Order.TotalAmount}}</span>
                        </div>
                    </div>
                </div>

                <!-- Timeline -->
                <div class="bg-white p-8 rounded-[2.5rem] shadow-soft border border-gray-100">
                    <h3 class="font-black text-sm uppercase tracking-widest mb-8 text-gray-400">Riwayat Perjalanan</h3>
                    <div class="relative space-y-8 pl-8 before:absolute before:left-[11px] before:top-2 before:bottom-2 before:w-0.5 before:bg-gray-100">
                        {{range .Order.Timeline}}
                        <div class="relative">
                            <div class="absolute -left-10 top-1.5 w-6 h-6 rounded-full border-4 border-white bg-black shadow-sm"></div>
                            <h4 class="font-black text-sm uppercase tracking-tight">{{.Title}}</h4>
                            <p class="text-xs text-gray-400 font-medium mb-1">{{.Description}}</p>
                            <p class="text-[10px] text-gray-300 font-bold uppercase tracking-widest">{{.Timestamp.Format "02 Jan 2006, 15:04"}}</p>
                        </div>
                        {{end}}
                    </div>
                </div>
            </div>

            <!-- Right Side (Actions & Payment) -->
            <div class="lg:col-span-1 space-y-8">
                {{if eq .Order.Status "PENDING"}}
                <div class="bg-black text-white p-8 rounded-[2.5rem] shadow-xl shadow-black/10">
                    <h3 class="font-black text-sm uppercase tracking-[0.2em] mb-6 text-gray-400">Pembayaran</h3>
                    <p class="text-xs text-gray-300 mb-8 leading-relaxed font-medium">Selesaikan pembayaran Anda menggunakan portal aman Midtrans.</p>
                    
                    <button 
                        onclick="window.snap.pay('{{.Order.SnapToken}}')"
                        class="w-full py-4 bg-white text-black rounded-2xl font-black uppercase text-xs tracking-widest hover:scale-[1.02] transition-all active:scale-95"
                    >
                        Bayar Sekarang
                    </button>
                </div>
                {{end}}

                <div class="bg-white p-8 rounded-[2.5rem] shadow-soft border border-gray-100">
                    <h3 class="font-black text-sm uppercase tracking-widest mb-6 text-gray-400">Alamat & Catatan</h3>
                    <p class="text-sm font-medium text-gray-600 leading-relaxed italic">
                        "{{.Order.Address}}"
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://app.sandbox.midtrans.com/snap/snap.js" data-client-key="SET_YOUR_CLIENT_KEY"></script>
